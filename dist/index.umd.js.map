{"version":3,"file":"index.umd.js","sources":["../src/uuid/rng.ts","../src/uuid/regex.ts","../src/uuid/validate.ts","../src/uuid/stringify.ts","../src/uuid/index.ts","../src/helpers.ts","../src/types.ts","../src/api.ts","../src/index.ts"],"sourcesContent":["const rnds8Pool = new Uint8Array(256); // # of random values to pre-allocate\nlet poolPtr = rnds8Pool.length;\n\nexport default function rng() {\n  if (poolPtr > rnds8Pool.length - 16) {\n    crypto.getRandomValues(rnds8Pool);\n    poolPtr = 0;\n  }\n  return rnds8Pool.slice(poolPtr, (poolPtr += 16));\n}\n","export default /^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;\n","import REGEX from './regex';\n\nfunction validate(uuid: string): boolean {\n  return typeof uuid === 'string' && REGEX.test(uuid);\n}\n\nexport default validate;\n","import validate from './validate';\n\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\nconst byteToHex: any = [];\n\nfor (let i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).substr(1));\n}\n\nfunction stringify(arr: any, offset = 0): string {\n  // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n  const uuid = (\n    byteToHex[arr[offset + 0]] +\n    byteToHex[arr[offset + 1]] +\n    byteToHex[arr[offset + 2]] +\n    byteToHex[arr[offset + 3]] +\n    '-' +\n    byteToHex[arr[offset + 4]] +\n    byteToHex[arr[offset + 5]] +\n    '-' +\n    byteToHex[arr[offset + 6]] +\n    byteToHex[arr[offset + 7]] +\n    '-' +\n    byteToHex[arr[offset + 8]] +\n    byteToHex[arr[offset + 9]] +\n    '-' +\n    byteToHex[arr[offset + 10]] +\n    byteToHex[arr[offset + 11]] +\n    byteToHex[arr[offset + 12]] +\n    byteToHex[arr[offset + 13]] +\n    byteToHex[arr[offset + 14]] +\n    byteToHex[arr[offset + 15]]\n  ).toLowerCase();\n\n  // Consistency check for valid UUID.  If this throws, it's likely due to one\n  // of the following:\n  // - One or more input array values don't map to a hex octet (leading to\n  // \"undefined\" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n  if (!validate(uuid)) {\n    throw TypeError('Stringified UUID is invalid');\n  }\n\n  return uuid;\n}\n\nexport default stringify;\n","import rng from './rng';\nimport stringify from './stringify';\n\n// **`v1()` - Generate time-based UUID**\n//\n// Inspired by https://github.com/LiosK/UUID.js\n// and http://docs.python.org/library/uuid.html\n\nlet _nodeId: unknown;\nlet _clockseq: unknown;\n\n// Previous uuid creation time\nlet _lastMSecs = 0;\nlet _lastNSecs = 0;\n\n// See https://github.com/uuidjs/uuid for API details\nfunction v1(options?: any, buf?: any, offset?: any) {\n  let i = (buf && offset) || 0;\n  const b = buf || new Array(16);\n\n  options = options || {};\n  let node = options.node || _nodeId;\n  let clockseq = options.clockseq !== undefined ? options.clockseq : _clockseq;\n\n  // node and clockseq need to be initialized to random values if they're not\n  // specified.  We do this lazily to minimize issues related to insufficient\n  // system entropy.  See #189\n  if (node == null || clockseq == null) {\n    const seedBytes = options.random || (options.rng || rng)();\n\n    if (node == null) {\n      // Per 4.5, create and 48-bit node id, (47 random bits + multicast bit = 1)\n      node = _nodeId = [\n        seedBytes[0] | 0x01,\n        seedBytes[1],\n        seedBytes[2],\n        seedBytes[3],\n        seedBytes[4],\n        seedBytes[5],\n      ];\n    }\n\n    if (clockseq == null) {\n      // Per 4.2.2, randomize (14 bit) clockseq\n      clockseq = _clockseq = ((seedBytes[6] << 8) | seedBytes[7]) & 0x3fff;\n    }\n  }\n\n  // UUID timestamps are 100 nano-second units since the Gregorian epoch,\n  // (1582-10-15 00:00).  JSNumbers aren't precise enough for this, so\n  // time is handled internally as 'msecs' (integer milliseconds) and 'nsecs'\n  // (100-nanoseconds offset from msecs) since unix epoch, 1970-01-01 00:00.\n  let msecs = options.msecs !== undefined ? options.msecs : Date.now();\n\n  // Per 4.2.1.2, use count of uuid's generated during the current clock\n  // cycle to simulate higher resolution clock\n  let nsecs = options.nsecs !== undefined ? options.nsecs : _lastNSecs + 1;\n\n  // Time since last uuid creation (in msecs)\n  const dt = msecs - _lastMSecs + (nsecs - _lastNSecs) / 10000;\n\n  // Per 4.2.1.2, Bump clockseq on clock regression\n  if (dt < 0 && options.clockseq === undefined) {\n    clockseq = (clockseq + 1) & 0x3fff;\n  }\n\n  // Reset nsecs if clock regresses (new clockseq) or we've moved onto a new\n  // time interval\n  if ((dt < 0 || msecs > _lastMSecs) && options.nsecs === undefined) {\n    nsecs = 0;\n  }\n\n  // Per 4.2.1.2 Throw error if too many uuids are requested\n  if (nsecs >= 10000) {\n    throw new Error(\"uuid.v1(): Can't create more than 10M uuids/sec\");\n  }\n\n  _lastMSecs = msecs;\n  _lastNSecs = nsecs;\n  _clockseq = clockseq;\n\n  // Per 4.1.4 - Convert from unix epoch to Gregorian epoch\n  msecs += 12219292800000;\n\n  // `time_low`\n  const tl = ((msecs & 0xfffffff) * 10000 + nsecs) % 0x100000000;\n  b[i++] = (tl >>> 24) & 0xff;\n  b[i++] = (tl >>> 16) & 0xff;\n  b[i++] = (tl >>> 8) & 0xff;\n  b[i++] = tl & 0xff;\n\n  // `time_mid`\n  const tmh = ((msecs / 0x100000000) * 10000) & 0xfffffff;\n  b[i++] = (tmh >>> 8) & 0xff;\n  b[i++] = tmh & 0xff;\n\n  // `time_high_and_version`\n  b[i++] = ((tmh >>> 24) & 0xf) | 0x10; // include version\n  b[i++] = (tmh >>> 16) & 0xff;\n\n  // `clock_seq_hi_and_reserved` (Per 4.2.2 - include variant)\n  b[i++] = (clockseq >>> 8) | 0x80;\n\n  // `clock_seq_low`\n  b[i++] = clockseq & 0xff;\n\n  // `node`\n  for (let n = 0; n < 6; ++n) {\n    b[i + n] = node[n];\n  }\n\n  return buf || stringify(b);\n}\n\nexport { v1 };\n","export const delay = (time: number): Promise<void> =>\n  new Promise((resolve) => setTimeout(resolve, time));\n","import type { AxiosPromise } from 'axios';\n\nexport type TaskResponce =\n  | { uuid: string; number: number; isBlocked: boolean; blockedUUID: string }\n  | {\n      error: {\n        code: number;\n        description: string;\n      };\n    };\n\nexport enum TaskResultStatus {\n  ready = 'ready',\n  error = 'error',\n  wait = 'wait',\n  inProgress = 'inProgress',\n  interrupted = 'interrupted',\n  blocked = 'blocked',\n  canceled = 'canceled',\n}\n\nexport enum RequestTypes {\n  openShift = 'openShift',\n  closeShift = 'closeShift',\n  cashIn = 'cashIn',\n  cashOut = 'cashOut',\n  sell = 'sell',\n  sellReturn = 'sellReturn',\n  buy = 'buy',\n  buyReturn = 'buyReturn',\n}\n\nexport type TaxationType =\n  | 'osn' // общая\n  | 'usnIncome' // упрощенная (Доход)\n  | 'usnIncomeOutcome' // упрощенная (Доход минус Расход)\n  | 'envd' // единый налог на вмененный доход\n  | 'esn' // единый сельскохозяйственный налог\n  | 'patent'; // патентная система налогообложения\n\nexport type TaskResultResponce = {\n  results: {\n    error: {\n      code: number;\n      description: string;\n    };\n    status: TaskResultStatus;\n  }[];\n};\n\nexport type Session = {\n  taxationType: TaxationType;\n  operator: {\n    name: string;\n    vatin: string; // ИНН оператора\n  };\n};\n\nexport type PositionTax =\n  | 'none' // без НДС\n  | 'vat0' // НДС 0%\n  | 'vat10' // НДС 10%\n  | 'vat110' // НДС 10/110\n  | 'vat18' // НДС 18%\n  | 'vat118' // НДС 18/118%\n  | 'vat20' // НДС 20%\n  | 'vat120'; // НДС 20/120%\n\nexport type Item = {\n  type: 'position';\n  name: string; // Наименование\n  price: number; // Цена за единицу товара\n  quantity: number; // Количество товара\n  amount: number; // Сумма позиции\n  infoDiscountSum?: number; // Информационная скидка. Не влияет на сумму позиции, остальные параметры должны передаваться с учетом её.\n  tax: {\n    type: PositionTax;\n    sum?: number; // Сумма налога\n  };\n  paymentMethod?:\n    | 'fullPrepayment' // По умолчанию: предоплата 100%\n    | 'prepayment' // предоплата\n    | 'advance' // аванс\n    | 'fullPayment' // полный расчет\n    | 'partialPayment' // частичный расчет и кредит\n    | 'credit' // передача в кредит\n    | 'creditPayment'; // оплата кредита\n  paymentObject?: 'commodity' | 'excise' | 'job' | 'service'; // По умолчанию: commodity\n  department?: number; // Отдел / секция. По умолчанию: 1\n  markingCode: {\n    type?: 'other' | 'egais20' | 'egais30'; // Тип марки. По умолчанию: other\n    mark: string; // base64-представление кода маркировки\n  };\n};\n\nexport type Payment = {\n  type:\n    | 'cash' // наличными\n    | 'electronicaly' // безналичными\n    | 'prepaid' // предварительная оплата (аванс)\n    | 'credir' // последующая оплата (кредит)\n    | 'other'; // иная форма оплаты (встречное предоставление)\n  sum: number;\n};\n\nexport type MinimumArray<T> = [T, ...T[]];\n\nexport type Sell = {\n  items: MinimumArray<Item>;\n  payments: MinimumArray<Payment>;\n  total?: number; // Итог чека. Может отличаться от суммы позиций на значение,\n  // равное копейкам чека. Если не задан - высчитывается автоматически из суммы всех позиций\n};\n\nexport type SellRequest = { type: RequestTypes } & Session & Sell;\n\nexport type AtolDriverInterface = {\n  openShift: () => AxiosPromise<TaskResponce>;\n  closeShift: () => AxiosPromise<TaskResponce>;\n  cashIn: (sum: number) => AxiosPromise<TaskResponce>;\n  cashOut: (sum: number) => AxiosPromise<TaskResponce>;\n  sell: (data: Sell) => AxiosPromise<TaskResponce>;\n  checkStatus: (uuid: string, callIndex?: number) => Promise<TaskResultStatus>;\n};\n","import axios, { AxiosPromise } from 'axios';\nimport Ajv from 'ajv';\nimport SessionSchema from './validation/Session.json';\nimport { v1 as buildUUID } from './uuid';\nimport { delay } from './helpers';\nimport {\n  Session,\n  TaskResponce,\n  TaskResultResponce,\n  TaskResultStatus,\n  RequestTypes,\n  AtolDriverInterface,\n  Sell,\n  SellRequest,\n} from './types';\n\nconst DEFAULT_BASE_URL = 'http://127.0.0.1:16732';\nconst MAX_CALLS = 3;\nconst DELAY_BETWEEN_CALLS = 1000;\n\nconst ajv = new Ajv({\n  allErrors: true,\n  removeAdditional: true,\n  useDefaults: true,\n});\n\nexport default (\n  session: Session,\n  baseURL: string = DEFAULT_BASE_URL,\n): AtolDriverInterface => {\n  const API = axios.create({\n    baseURL,\n    timeout: 1000,\n  });\n\n  const validate = ajv.compile(SessionSchema);\n\n  if (!validate(session)) {\n    console.log(\n      '%c[ATOL] [validation]',\n      'color:red',\n      ajv.errorsText(validate.errors),\n    );\n    throw new Error(ajv.errorsText(validate.errors));\n  }\n\n  const { operator, taxationType } = session;\n\n  const post = <T = unknown>(\n    uuid: string,\n    request: T,\n  ): AxiosPromise<TaskResponce> => {\n    return API.post('/api/v2/request', { uuid, request });\n  };\n\n  const get = (uuid: string): AxiosPromise<TaskResultResponce> => {\n    return API.get(`/api/v2/request/${uuid}`);\n  };\n\n  /*\n   * Открытие смены\n   */\n  const openShift = (): AxiosPromise<TaskResponce> => {\n    const uuid = buildUUID();\n    return post(uuid, [\n      {\n        type: RequestTypes[RequestTypes.openShift],\n        operator,\n      },\n    ]);\n  };\n\n  /*\n   * Закрытие смены\n   */\n  const closeShift = (): AxiosPromise<TaskResponce> => {\n    const uuid = buildUUID();\n    return post(uuid, [\n      {\n        type: RequestTypes[RequestTypes.closeShift],\n        operator,\n      },\n    ]);\n  };\n\n  /*\n   * Внесение наличных\n   */\n  const cashIn = (cashSum: number): AxiosPromise<TaskResponce> => {\n    const uuid = buildUUID();\n    return post(uuid, [\n      {\n        type: RequestTypes[RequestTypes.cashIn],\n        operator,\n      },\n      cashSum,\n    ]);\n  };\n\n  /*\n   * Выплата наличных\n   */\n  const cashOut = (cashSum: number): AxiosPromise<TaskResponce> => {\n    const uuid = buildUUID();\n    return post(uuid, [\n      {\n        type: RequestTypes[RequestTypes.cashOut],\n        operator,\n      },\n      cashSum,\n    ]);\n  };\n\n  /*\n   * Чек прихода – продажа\n   */\n  const sell = (data: Sell): AxiosPromise<TaskResponce> => {\n    const uuid = buildUUID();\n    return post<SellRequest[]>(uuid, [\n      {\n        type: RequestTypes[RequestTypes.sell],\n        taxationType,\n        operator,\n        ...data,\n      },\n    ]);\n  };\n\n  /*\n   * Проверка статуса задания\n   */\n  const checkStatus = async (\n    uuid: string,\n    callIndex = 0,\n  ): Promise<TaskResultStatus> => {\n    try {\n      const {\n        data: { results },\n      } = await get(uuid);\n      const status = results?.[0]?.status;\n      console.log('%c[ATOL] [checkStatus]', 'color:green', results);\n\n      if (callIndex >= MAX_CALLS) {\n        throw new Error('MAX_CALLS LIMIT!');\n      }\n\n      if (status !== TaskResultStatus['ready']) {\n        await delay(DELAY_BETWEEN_CALLS);\n        return checkStatus(uuid, callIndex + 1);\n      }\n      return status;\n    } catch (error) {\n      console.log('%c[ATOL] [checkStatus]', 'color:red', error);\n      return TaskResultStatus['error'];\n    }\n  };\n\n  return { openShift, closeShift, cashIn, cashOut, sell, checkStatus };\n};\n","import API from './api';\nimport type { Session, AtolDriverInterface } from './types';\n\nexport const init = ({\n  session,\n  baseUrl,\n}: {\n  session: Session;\n  baseUrl: string;\n}): AtolDriverInterface => API(session, baseUrl);\n"],"names":["Ajv","axios","buildUUID"],"mappings":"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"}